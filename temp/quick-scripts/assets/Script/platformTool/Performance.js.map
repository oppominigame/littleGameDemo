{"version":3,"sources":["Performance.ts"],"names":[],"mappings":";;;;AAAA;;;;;;GAMG;;AAEG,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAkB;AAG3C;IAAyC,+BAAY;IADrD;QAAA,qEAuDC;QApDC,cAAQ,GAAa,IAAI,CAAA;QAGzB,cAAQ,GAAY,IAAI,CAAA;QAGxB,aAAO,GAAY,IAAI,CAAA;QAGvB,eAAS,GAAY,IAAI,CAAA;QAGzB,QAAE,GAAY,IAAI,CAAA;QAGlB,eAAS,GAAY,IAAI,CAAA;;IAqC3B,CAAC;IAnCC,2BAAK,GAAL;QAAA,iBA6BC;QA5BC,IAAI,SAAS,GAAG,CAAC,CAAA;QACjB,IAAI,QAAQ,GAAG,CAAC,CAAA;QAChB,IAAI,MAAM,GAAG,IAAI,CAAA;QACjB,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;YAC9C,SAAS,GAAG,EAAE,CAAC,cAAc,EAAE,CAAC,GAAG,EAAE,CAAA;YACrC,KAAI,CAAC,GAAG,CAAC,mCAAQ,SAAW,CAAC,CAAA;QAC/B,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;YAC7C,QAAQ,GAAG,EAAE,CAAC,cAAc,EAAE,CAAC,GAAG,EAAE,CAAA;YACpC,KAAI,CAAC,GAAG,CAAC,uBAAM,SAAS,gCAAO,QAAQ,iCAAO,QAAQ,GAAG,SAAS,CAAE,CAAC,CAAA;QACvE,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;YAC/C,IAAI,MAAM,KAAK,IAAI,EAAE;gBACnB,OAAO;aACR;YACD,IAAI,WAAW,GAAG,IAAI,WAAW,CAAC,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC;YACpD,MAAM,GAAG,IAAI,SAAS,CAAC,WAAW,EAAE,CAAC,EAAE,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC;QAC3D,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;YACxC,KAAI,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAA;YACrC,EAAE,CAAC,SAAS,EAAE,CAAC;QACjB,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;YAC/C,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,CAAA;QACvC,CAAC,CAAC,CAAA;IACJ,CAAC;IAED,yBAAG,GAAH,UAAI,GAAG;QACL,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;QAChB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,GAAG,CAAA;IACnD,CAAC;IAnDD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;iDACM;IAGzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACM;IAGxB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACO;IAGzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;2CACA;IAGlB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACO;IAjBN,WAAW;QAD/B,OAAO;OACa,WAAW,CAsD/B;IAAD,kBAAC;CAtDD,AAsDC,CAtDwC,EAAE,CAAC,SAAS,GAsDpD;kBAtDoB,WAAW","file":"","sourceRoot":"../../../../../assets/Script/platformTool","sourcesContent":["/**\n * @desc: { 性能 } \n * @author: zhengyiqiu \n * @Create Date: 2020-06-30 20:44:24 \n * @Last Modified by: zhengyiqiu\n * @Last Modified time: 2020-07-01 10:24:31\n */\n\nconst { ccclass, property } = cc._decorator\n\n@ccclass\nexport default class Performance extends cc.Component {\n  @property(cc.Label)\n  logLabel: cc.Label = null\n\n  @property(cc.Node)\n  startBtn: cc.Node = null\n\n  @property(cc.Node)\n  stopBtn: cc.Node = null\n\n  @property(cc.Node)\n  createObj: cc.Node = null\n  \n  @property(cc.Node)\n  gc: cc.Node = null\n\n  @property(cc.Node)\n  returnBtn: cc.Node = null\n  \n  start() {\n    let startTime = 0\n    let stopTime = 0\n    let testGc = null\n    this.startBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      startTime = qg.getPerformance().now()\n      this.log(`开始计时：${startTime}`)\n    })\n    this.stopBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      stopTime = qg.getPerformance().now()\n      this.log(`开始：${startTime}，结束：${stopTime}，差值：${stopTime - startTime}`)\n    })\n\n    this.createObj.on(cc.Node.EventType.TOUCH_START, () => {\n      if (testGc !== null) {\n        return;\n      }\n      let dataContent = new ArrayBuffer(1024 * 1024 * 10);\n      testGc = new Int8Array(dataContent, 0, 1024 * 1024 * 10);\n    })\n\n    this.gc.on(cc.Node.EventType.TOUCH_START, () => {\n      this.log('垃圾回收，请用 adb logcat 查看内存变化')\n      qg.triggerGC();\n    })\n\n    this.returnBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      cc.director.loadScene('platformTool')\n    })\n  }\n\n  log(msg) {\n    console.log(msg)\n    this.logLabel.getComponent(cc.Label).string = msg\n  }\n}\n"]}