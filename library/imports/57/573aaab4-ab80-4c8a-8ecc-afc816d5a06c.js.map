{"version":3,"sources":["../../../../../assets/Script/render/assets/Script/render/Font.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/render","sourcesContent":["/**\n * @desc: { 字体 } \n * @author: zhengyiqiu \n * @Create Date: 2020-06-30 20:44:24 \n * @Last Modified by: zhengyiqiu\n * @Last Modified time: 2020-07-06 15:23:14\n */\n\nconst { ccclass, property } = cc._decorator\nlet fontUrls = [\n  \"http://47.98.62.68/cocos-runtime-demo/media/writer.ttf\",\n  \"http://47.98.62.68/cocos-runtime-demo/media/font/cinema-light.ttc\",\n  \"http://47.98.62.68/cocos-runtime-demo/media/font/Countryside.ttf\",\n  \"http://47.98.62.68/cocos-runtime-demo/media/font/kaze2-light.ttc\",\n  \"http://47.98.62.68/cocos-runtime-demo/media/font/Vegan.ttf\",\n  \"http://47.98.62.68/cocos-runtime-demo/media/font/ZapfinoExtraLTPro.otf\",\n  \"http://47.98.62.68/cocos-runtime-demo/media/font/ZapfinoForteLT-One.otf\",\n]\n@ccclass\nexport default class Font extends cc.Component {\n  @property(cc.Label)\n  logLabel: cc.Label = null\n\n  @property(cc.Node)\n  loadFont: cc.Node = null\n\n  @property(cc.Node)\n  changeFont: cc.Node = null\n  \n  @property(cc.Label)\n  progressLabel: cc.Label = null\n  \n  @property(cc.Label)\n  fontFamily: cc.Label = null\n\n  @property(cc.Label)\n  testFont: cc.Label = null\n\n  @property(cc.Node)\n  returnBtn: cc.Node = null\n  \n  start() {\n    let index = 0\n    let fontFamilyName\n    this.loadFont.on(cc.Node.EventType.TOUCH_START, () => {\n      if(index >= fontUrls.length-1) {\n        index = 0\n      } else {\n        index += 1 \n      }\n      let tempFilePath = `${qg.env.USER_DATA_PATH}/` + index + '.ttf'\n      let task = qg.downloadFile({\n          url: fontUrls[index],\n          filePath: tempFilePath,\n          success: () => {\n              this.log(`加载成功`)\n              fontFamilyName = qg.loadFont(tempFilePath)\n          },\n          fail: (msg) => {\n            this.log(JSON.stringify(msg))\n          },\n      });\n      \n      task.onProgressUpdate((msg) => {\n          this.progressLabel.getComponent(cc.Label).string =  msg['progress'] + '%'\n      });\n    })\n\n    this.changeFont.on(cc.Node.EventType.TOUCH_START, () => {\n      this.fontFamily.getComponent(cc.Label).string = '当前字体：' + fontFamilyName\n      this.testFont.getComponent(cc.Label).fontFamily =  fontFamilyName\n    })\n\n    this.returnBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      cc.director.loadScene('render')\n    })\n  }\n\n  log(msg) {\n    console.log(msg)\n    this.logLabel.getComponent(cc.Label).string = msg\n  }\n}\n"]}