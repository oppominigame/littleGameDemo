{"version":3,"sources":["../../../../../assets/Script/ad/assets/Script/ad/interstitialVideo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/ad","sourcesContent":["/**\n * @desc:插屏视频广告\n * @Create Date: 2019-08-29 16:05:14\n * @Last Modified time: 2019-08-29 16:05:14\n */\nconst { ccclass, property } = cc._decorator\n\ninterface IInterstitialVideo {\n  load: Function\n  show: Function\n  hide: Function\n  offResize: Function\n  style: object\n  onLoad: Function\n  offLoad: Function\n  onError: Function\n  offError: Function\n  onResize: Function\n  destroy: Function\n  onClose: Function\n  offClose: Function\n  onShow: Function\n  offShow: Function\n}\n\n@ccclass\nexport default class InterstitialVideo extends cc.Component {\n  @property(cc.Button)\n  returnBtn: cc.Button = null\n\n  @property(cc.Node)\n  createBtn: cc.Node = null\n\n  @property(cc.Node)\n  loadBtn: cc.Node = null\n\n  @property(cc.Node)\n  showBtn: cc.Node = null\n\n  @property(cc.Node)\n  onLoadBtn: cc.Node = null\n\n  @property(cc.Node)\n  offLoadBtn: cc.Node = null\n\n  @property(cc.Node)\n  onShowBtn: cc.Node = null\n\n  @property(cc.Node)\n  offShowBtn: cc.Node = null\n\n  @property(cc.Node)\n  onErrorBtn: cc.Node = null\n\n  @property(cc.Node)\n  offErrorBtn: cc.Node = null\n\n  @property(cc.Node)\n  destroyBtn: cc.Node = null\n\n  @property(cc.Node)\n  onCloseBtn: cc.Node = null\n\n  @property(cc.Node)\n  offCloseBtn: cc.Node = null\n\n  @property(cc.Node)\n  logLabel: cc.Node = null\n\n  @property(cc.Object)\n  interstitialVideo: IInterstitialVideo = null\n\n  start() {\n    this.createBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.interstitialVideo = qg.createInterstitialVideoAd({\n        // 以下所有激励广告 API 需支持最低平台版本号'1051' (minPlatformVersion>='1051')\n        adUnitId: '143906'\n      })\n      this.log(`创建插屏视频广告, 143906`)\n    })\n\n    this.loadBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.log('加载广告')\n      this.interstitialVideo.load()\n    })\n\n    this.showBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.log('展示广告')\n      // 调用 show 方法请求展示 banner，成功的时候回调 onShow，出错的时候回调 onError\n      this.interstitialVideo.show()\n    })\n\n    this.destroyBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.log('销毁广告')\n      this.interstitialVideo.destroy()\n    })\n\n    let onLoadCallBack = () => {\n      this.log('加载广告成功回调')\n    }\n\n    this.onLoadBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('设置广告加载回调')\n      // 设置 banner 成功加载回调\n      this.interstitialVideo.onLoad(onLoadCallBack)\n    })\n\n    this.offLoadBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('移除广告加载回调')\n      // 设置 banner 成功加载回调\n      this.interstitialVideo.offLoad(onLoadCallBack)\n    })\n\n    let onShowCallback = () => {\n      this.log('展示广告成功回调')\n    }\n\n    this.onShowBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('设置广告展示回调')\n      // 设置 banner 成功加载回调\n      this.interstitialVideo.onShow(onShowCallback)\n    })\n\n    this.offShowBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('移除广告展示回调')\n      // 设置 banner 成功加载回调\n      this.interstitialVideo.offShow(onShowCallback)\n    })\n\n    let onErrorCallback = err => {\n      this.log(`广告失败回调： ${JSON.stringify(err)}`)\n    }\n\n    this.onErrorBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('设置广告失败回调')\n      // 设置 banner 成功加载回调\n      this.interstitialVideo.onError(onErrorCallback)\n    })\n\n    this.offErrorBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('移除广告失败回调')\n      // 设置 banner 成功加载回调\n      this.interstitialVideo.offError(onErrorCallback)\n    })\n\n    let onCloseCallback = () => {\n      this.log('插屏视频广告关闭')\n    }\n\n    this.onCloseBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('设置广告关闭回调')\n\n      this.interstitialVideo.onClose(onCloseCallback)\n    })\n\n    this.offCloseBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('移除广告关闭回调')\n\n      // 设置 banner 成功加载回调\n      this.interstitialVideo.offClose(onCloseCallback)\n    })\n  }\n\n  // 回调信息展示\n  log(msg) {\n    console.log(msg)\n    this.logLabel.getComponent(cc.Label).string = msg\n  }\n\n  // 返回\n  onClickReturnBtn() {\n    cc.director.loadScene('ad')\n  }\n\n  onDestroy() {\n    if (!this.interstitialVideo) return\n    this.interstitialVideo.destroy() // 销毁组件，释放资源\n  }\n}\n"]}