{"version":3,"sources":["../../../../../assets/Script/device/assets/Script/device/QRCode.ts"],"names":[],"mappings":";;;;;AAAA;;;;;;GAMG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEG,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAA;AAG3C;IAAmC,yBAAY;IAD/C;QAAA,qEA2FC;QAxFC,kBAAY,GAAe,IAAI,CAAA;QAG/B,oBAAc,GAAe,IAAI,CAAA;QAGjC,eAAS,GAAe,IAAI,CAAA;QAG5B,yBAAmB,GAAc,IAAI,CAAA;QAGrC,wBAAkB,GAAc,IAAI,CAAA;QAGpC,oBAAc,GAAY,IAAI,CAAA;QAG9B,eAAS,GAAY,IAAI,CAAA;QAGzB,eAAS,GAAY,IAAI,CAAA;QAGzB,cAAQ,GAAa,IAAI,CAAA;;IAgE3B,CAAC;IA9DC,qBAAK,GAAL;QAAA,iBA0CC;QAzCC,EAAE,CAAC,eAAe,IAAI,EAAE,CAAC,eAAe,CAAC;YACvC,OAAO,EAAE,UAAC,GAAG;gBACX,KAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAA;gBAC3D,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;YACxC,CAAC;SACF,CAAC,CAAA;QACF,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAC;;;;gBAC/C,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,IAAI,EAAE,CAAA;gBACxC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,IAAI,EAAE,CAAA;gBAC5C,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,EAAE,CAAA;gBAClC,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAA;gBAClD,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAA;gBAEpD,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE;oBACnC,OAAO,SAAA;oBACP,SAAS,WAAA;oBACT,aAAa,eAAA;oBACb,YAAY,cAAA;oBACZ,IAAI,MAAA;iBACL,CAAC,CAAA;gBACF,EAAE,CAAC,YAAY,CAAC;oBACd,OAAO,SAAA;oBACP,SAAS,WAAA;oBACT,aAAa,eAAA;oBACb,YAAY,cAAA;oBACZ,IAAI,MAAA;oBACJ,OAAO,EAAE,UAAC,GAAG;wBACX,KAAI,CAAC,GAAG,CAAC,2BAAyB,GAAG,CAAC,IAAI,UAAI,aAAa,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAA,EAAE,CAAE,CAAC,CAAA;wBAC9E,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,SAAS,CAAC,CAAA;wBAC3B,KAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,EAAE,KAAI,CAAC,SAAS,CAAC,CAAA;oBAC3C,CAAC;oBACD,IAAI,EAAE,UAAC,GAAG;wBACR,KAAI,CAAC,GAAG,CAAC,wBAAsB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAG,CAAC,CAAA;oBACvD,CAAC;iBACF,CAAC,CAAA;;;aAEH,CAAC,CAAA;QAEF,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;YAC/C,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAA;QACjC,CAAC,CAAC,CAAA;IACJ,CAAC;IAED,SAAS;IACT,mBAAG,GAAH,UAAI,GAAG;QACL,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;QAChB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,GAAG,CAAA;IACnD,CAAC;IAED,0BAAU,GAAV,UAAW,GAAW,EAAE,UAAe;QACrC,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,UAAU,GAAG,EAAE,UAAU;YAC3C,qCAAqC;YACrC,IAAG,GAAG,IAAI,CAAC,UAAU,EAAE;gBACnB,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;gBAC1B,OAAM;aACT;YACD,IAAI,WAAW,GAAG,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;YACvC,WAAW,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YACnC,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/D,CAAC,CAAC,CAAC;IACL,CAAC;IAvFD;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;+CACU;IAG/B;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;iDACY;IAGjC;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;4CACO;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;sDACiB;IAGrC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;qDACgB;IAGpC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACY;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACO;IAGzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACO;IAGzB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;2CACM;IA1BN,KAAK;QADzB,OAAO;OACa,KAAK,CA0FzB;IAAD,YAAC;CA1FD,AA0FC,CA1FkC,EAAE,CAAC,SAAS,GA0F9C;kBA1FoB,KAAK","file":"","sourceRoot":"../../../../../assets/Script/device","sourcesContent":["/**\n * @desc: { 二维码 } \n * @author: zhengyiqiu \n * @Create Date: 2021-10-12 16:56:37 \n * @Last Modified by: zhengyiqiu\n * @Last Modified time: 2021-10-13 15:00:04\n */\n\nconst { ccclass, property } = cc._decorator\n\n@ccclass\nexport default class Voice extends cc.Component {\n  @property(cc.EditBox)\n  pkgNameInput: cc.EditBox = null\n\n  @property(cc.EditBox)\n  extraDataInput: cc.EditBox = null\n\n  @property(cc.EditBox)\n  dataInput: cc.EditBox = null\n\n  @property(cc.Toggle)\n  isSaveToAlbumToggle: cc.Toggle = null\n\n  @property(cc.Toggle)\n  isBattleGameToggle: cc.Toggle = null\n\n  @property(cc.Node)\n  creatQRCodeBtn: cc.Node = null\n\n  @property(cc.Node)\n  returnBtn: cc.Node = null\n\n  @property(cc.Node)\n  qrcodeImg: cc.Node = null\n\n  @property(cc.Label)\n  logLabel: cc.Label = null\n\n  start() {\n    qg.getManifestInfo && qg.getManifestInfo({\n      success: (res) => {\n        this.pkgNameInput.string = JSON.parse(res.manifest).package\n        console.log(JSON.parse(res.manifest));\n      }\n    })\n    this.creatQRCodeBtn.on(cc.Node.EventType.TOUCH_START,async () => {\n      let pkgName = this.pkgNameInput.string || ''\n      let extraData = this.extraDataInput.string || ''\n      let data = this.dataInput.string || ''\n      let isSaveToAlbum = this.isSaveToAlbumToggle.isChecked\n      let isBattleGame = this.isBattleGameToggle.isChecked\n    \n      console.log('createQRCode params: ', {\n        pkgName,\n        extraData,\n        isSaveToAlbum,\n        isBattleGame,\n        data,\n      })\n      qg.createQRCode({\n        pkgName,\n        extraData,\n        isSaveToAlbum,\n        isBattleGame,\n        data,\n        success: (res) => {\n          this.log(`createQRCode success: ${res.path} ${isSaveToAlbum ? '已经保存到相册' :\"\"}`)\n          console.log(this.qrcodeImg)\n          this.loadUrlImg(res.path, this.qrcodeImg)\n        },\n        fail: (res) => {\n          this.log(`createQRCode fail: ${JSON.stringify(res)}`)\n        }\n      })\n      \n    })\n\n    this.returnBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      cc.director.loadScene('device')\n    })\n  }\n  \n  // 回调信息展示\n  log(msg) {\n    console.log(msg)\n    this.logLabel.getComponent(cc.Label).string = msg\n  }\n\n  loadUrlImg(url: string, spriteNode: any) {\n    cc.loader.load(url, function (err, imageAsset) {\n      // Use texture to create sprite frame\n      if(err || !imageAsset) {\n          console.error('头像错误', err)\n          return\n      }\n      let spriteFrame = new cc.SpriteFrame();\n      spriteFrame.setTexture(imageAsset);\n      spriteNode.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n    });\n  }\n}\n"]}