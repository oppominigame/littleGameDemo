{"version":3,"sources":["../../../../../assets/Script/device/assets/Script/device/Memory.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/device","sourcesContent":["/**\n * @desc: { 性能 } \n * @author: zhengyiqiu \n * @Create Date: 2020-06-23 10:21:00 \n * @Last Modified by: 80261040\n * @Last Modified time: 2021-06-24 16:27:31\n */\n\nconst { ccclass, property } = cc._decorator\n\n@ccclass\nexport default class Memory extends cc.Component {\n  @property(cc.Label)\n  logLabel: cc.Label = null\n\n  @property(cc.Node)\n  onMemoryWarningBtn: cc.Node = null\n\n  @property(cc.Node)\n  offMemoryWarningBtn: cc.Node = null\n\n  @property(cc.Node)\n  addMemoryBtn: cc.Node = null\n\n  @property(cc.Node)\n  triggerGCBtn: cc.Node = null\n\n  @property(cc.Node)\n  returnBtn: cc.Node = null\n\n  private b = null\n  \n  start() {\n    const callback = (res) => {\n      this.log(`监听内存不足告警事件：${JSON.stringify(res)}`);\n    }\n    this.onMemoryWarningBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.log(`开始监听内存不足告警事件`);\n      qg.onMemoryWarning(callback)\n    })\n\n    this.offMemoryWarningBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.log(`取消监听内存不足告警事件`);\n      qg.offMemoryWarning(callback)\n    })\n    var arr = []\n\n    this.addMemoryBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      // let theThing = null;\n      // let replaceThing = function() {\n      //   const newThing = theThing;\n      //   const unused = function() {\n      //     if (newThing) console.log(\"hi\");\n      //   };\n      //   // 不断修改引用\n      //   theThing = {\n      //     longStr: new Array(10).join(\"*\"),\n      //     someMethod: function() {\n      //       console.log(\"a\");\n      //     },\n      //   };\n      // };\n      // replaceThing()\n      this.log(`增加内存`);\n      // 999999999\n      // this.b = new Array(99999990).fill(1)\n      this.b = new Array(35999999).fill(1)\n      arr.push(this.b)\n    })\n\n    this.triggerGCBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.b=null\n      arr = []\n      qg.triggerGC()\n      this.log(`垃圾回收`);\n    })\n\n    this.returnBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      cc.director.loadScene('device')\n    })\n  }\n\n  log(msg) {\n    console.log(msg)\n    this.logLabel.getComponent(cc.Label).string = msg\n  }\n}\n"]}