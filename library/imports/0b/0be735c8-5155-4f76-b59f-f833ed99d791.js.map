{"version":3,"sources":["../../../../../assets/Script/network/assets/Script/network/Download.ts"],"names":[],"mappings":";;;;AAAA;;;;;;GAMG;;AAEG,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAkB;AAG3C;IAAsC,4BAAY;IADlD;QAAA,qEAgDC;QA7CC,cAAQ,GAAa,IAAI,CAAA;QAGzB,iBAAW,GAAY,IAAI,CAAA;QAG3B,mBAAa,GAAa,IAAI,CAAA;QAG9B,kBAAY,GAAc,IAAI,CAAA;QAG9B,eAAS,GAAY,IAAI,CAAA;;IAiC3B,CAAC;IA/BC,wBAAK,GAAL;QAAA,iBAyBC;QAxBC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;YACjD,IAAI,YAAY,GAAM,EAAE,CAAC,GAAG,CAAC,cAAc,kBAAe,CAAA;YAC1D,IAAI,IAAI,GAAG,EAAE,CAAC,YAAY,CAAC;gBACvB,GAAG,EAAE,uFAAuF;gBAC5F,QAAQ,EAAE,YAAY;gBACtB,OAAO,EAAE;oBACL,KAAI,CAAC,GAAG,CAAC,0BAAM,CAAC,CAAA;oBAChB,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,UAAC,GAAG,EAAE,OAAO;wBACtC,KAAI,CAAC,YAAY,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,EAAE,CAAC,WAAW,CAAC,OAAO,CAAC,CAAA;oBACvF,CAAC,CAAC,CAAA;gBACN,CAAC;gBACD,IAAI,EAAE,UAAC,GAAG;oBACR,KAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAA;gBAC/B,CAAC;aACJ,CAAC,CAAC;YAEH,IAAI,CAAC,gBAAgB,CAAC,UAAC,GAAG;gBACtB,KAAI,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAI,GAAG,CAAC,UAAU,CAAC,GAAG,GAAG,CAAA;YAC7E,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;YAC/C,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,CAAA;QAClC,CAAC,CAAC,CAAA;IACJ,CAAC;IAED,sBAAG,GAAH,UAAI,GAAG;QACL,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;QAChB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,GAAG,CAAA;IACnD,CAAC;IA5CD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;8CACM;IAGzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACS;IAG3B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDACW;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;kDACU;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;+CACO;IAdN,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA+C5B;IAAD,eAAC;CA/CD,AA+CC,CA/CqC,EAAE,CAAC,SAAS,GA+CjD;kBA/CoB,QAAQ","file":"","sourceRoot":"../../../../../assets/Script/network","sourcesContent":["/**\n * @desc: { 字体 } \n * @author: zhengyiqiu \n * @Create Date: 2020-06-30 20:44:24 \n * @Last Modified by: zhengyiqiu\n * @Last Modified time: 2020-07-01 19:24:22\n */\n\nconst { ccclass, property } = cc._decorator\n\n@ccclass\nexport default class Download extends cc.Component {\n  @property(cc.Label)\n  logLabel: cc.Label = null\n\n  @property(cc.Node)\n  downloadBtn: cc.Node = null\n\n  @property(cc.Label)\n  progressLabel: cc.Label = null\n  \n  @property(cc.Sprite)\n  imgContainer: cc.Sprite = null\n\n  @property(cc.Node)\n  returnBtn: cc.Node = null\n  \n  start() {\n    this.downloadBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      let tempFilePath = `${qg.env.USER_DATA_PATH}/download.png`\n      let task = qg.downloadFile({\n          url: 'https://openfs.oppomobile.com/open/res/201907/31/5f27f86a3cc84b02a8baaf0a4a3066ab.png',\n          filePath: tempFilePath,\n          success: () => {\n              this.log(`加载成功`)\n              cc.loader.load(tempFilePath, (err, texture) => {\n                  this.imgContainer.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture)\n              })\n          },\n          fail: (msg) => {\n            this.log(JSON.stringify(msg))\n          },\n      });\n      \n      task.onProgressUpdate((msg) => {\n          this.progressLabel.getComponent(cc.Label).string =  msg['progress'] + '%'\n      });\n    })\n\n    this.returnBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      cc.director.loadScene('network')\n    })\n  }\n\n  log(msg) {\n    console.log(msg)\n    this.logLabel.getComponent(cc.Label).string = msg\n  }\n}\n"]}