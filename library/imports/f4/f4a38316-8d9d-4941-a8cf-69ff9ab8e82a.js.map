{"version":3,"sources":["../../../../../assets/Script/detectFace/assets/Script/detectFace/detectFace.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/detectFace","sourcesContent":["const { ccclass, property } = cc._decorator\n\n@ccclass\nexport default class DrawImage extends cc.Component {\n  @property(cc.Node)\n  returnBtn: cc.Node = null\n  @property(cc.Node)\n  bg: cc.Node = null\n  @property(cc.Node)\n  setting: cc.Node = null\n\n  @property(cc.Toggle)\n  startCameraToggle: cc.Toggle = null\n\n  @property(cc.Toggle)\n  detectFacesToggle: cc.Toggle = null\n\n  @property(cc.Toggle)\n  onActionsToggle: cc.Toggle = null\n\n  @property(cc.Texture2D)\n  img: cc.Texture2D = null\n  @property(cc.Label)\n  blink: cc.Label = null\n  @property(cc.Label)\n  mouthAh: cc.Label = null\n  @property(cc.Label)\n  leftBlink: cc.Label = null\n  @property(cc.Label)\n  rightBlink: cc.Label = null\n  @property(cc.Label)\n  poutMouth: cc.Label = null\n  @property(cc.Label)\n  headYaw: cc.Label = null\n  @property(cc.Label)\n  headPitch: cc.Label = null\n  @property(cc.Label)\n  jumpEyeBrow: cc.Label = null\n  @property(cc.Label)\n  IndianHeadYaw: cc.Label = null\n\n  \n  @property(cc.Node)\n  setBeautifyBtn: cc.Node = null\n  @property(cc.EditBox)\n  smoothenInput: cc.EditBox = null\n  @property(cc.EditBox)\n  whitenInput: cc.EditBox = null\n  @property(cc.EditBox)\n  filterInput: cc.EditBox = null\n\n\n  private camera: any = null\n  private spriteFrame: any = null\n  private tex: any = null\n  private detector: any = null\n  private video: any = null\n  private cameraNode\n  private faceBox\n  private rectNode\n  private frame: number = 0;\n  // 放大系数\n  private _cameraScaleY: number;\n  private _curWidth: number;\n  private _curHeight: number;\n  private ctx\n  private isStartDetect = false\n  private faceBoxLabel\n  private showCb\n  private previewSize = 240\n  // 美颜参数\n  private beautifyParam = {\n    smoothen: 0.5,\n    whiten: 0.5,\n    filter: 0,\n  }\n  onCameraErr(err) {\n    if(err.code == -1) {\n      qg.showModal({\n        content: '当前游戏需要开启摄像头权限，是否前往设置？',\n        success: (res) =>{\n          if (res.confirm) {\n            console.log('用户点击确定')\n            this.setAuth()\n          } else if (res.cancel) {\n            console.log('用户点击取消')\n          }\n        }\n      })\n    } else if(err.code == -2) {\n      qg.showModal({\n        content: '权限请求失败，请稍后重试',\n        showCancel: false,\n        success: (res) =>{\n          this.bg.active = true\n          console.log('权限请求失败，请稍后重试')\n        }\n      })\n    } else if(err.code == -3) {\n      qg.showModal({\n        content: '初始化失败，请重启游戏',\n        showCancel: false,\n        success: (res) =>{\n          this.bg.active = true\n          console.log('初始化失败，请重启游戏')\n        }\n      })\n    }\n    console.log('onCameraErr', err)\n  }\n  setAuth() {\n    qg.openSetting({\n      success: (data) => {\n        this.bg.active = true\n        this.onStartCameraToggle({ isChecked: this.startCameraToggle.isChecked })\n      }\n    })\n  }\n  onDestroy() {\n    console.log('destory')\n    qg.offShow(this.showCb)\n    this.onAcitonsToggle({isChecked:false})\n    this.onDetectFacesToggle({isChecked:false})\n    this.onStartCameraToggle({isChecked:false})\n    \n  }\n  onLoad() {\n    qg.setKeepScreenOn({\n      keepScreenOn: true,\n      success: function(res) {},\n      fail: function(res) {},\n      complete: function(res) {}\n    })\n    this.setting.on(cc.Node.EventType.TOUCH_START, this.setAuth)\n    this.returnBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.camera.destroy()\n      this.detector.offActions()\n      this.detector.offDetectFaces()\n      qg.offShow(this.showCb)\n      cc.director.loadScene('main')\n    })\n    this.onStartCameraToggle({ isChecked: this.startCameraToggle.isChecked })\n    this.onDetectFacesToggle({ isChecked: this.detectFacesToggle.isChecked })\n    this.onAcitonsToggle({ isChecked: this.onActionsToggle.isChecked })\n    // 监听后台返回后进行摄像头重启，防止后台打开相机返回游戏后失效\n    this.showCb = () => {\n      this.camera = qg.createCamera()\n      this.camera.start().then(video => {\n        this.video = video;\n        this.initCameraNode()\n      }).catch(err => {\n        // 获取摄像头权限失败\n        this.onCameraErr(err)\n        console.log(err)\n      })\n    }\n    qg.onShow(this.showCb)\n    qg.onHide(() => {\n      this.camera.destroy()\n      this.camera = null\n    })\n    \n    this.setBeautifyBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.setBeautify()\n    })\n  }\n  startDetector() {\n    if (this.detector && this.tex) {\n      this.detector.detectFaces({ data: this.video.data, width: this.video.width, height: this.video.height })\n        .then(res => {\n          if (res.code == 0) {\n            if (Array.isArray(res.data) && res.data.length > 0) {\n              res.data.forEach((item, index) => {\n                // 以下是绘制人脸矩形的示例，其中因为cocos节点是世界坐标系，原点在屏幕中心的右手坐标系，而获取的人脸矩形的坐标是基于屏幕左上方为原点的左手坐标系，因此需对各坐标点做坐标系转换适配\n                // 左手坐标系的x轴上的坐标转换为世界坐标系\n                let left = (item.rect.left - this.video.width / 2) * this._cameraScaleY\n                let right = (item.rect.right - this.video.width / 2) * this._cameraScaleY\n                // 左手坐标系Y轴上的坐标转换为世界坐标系，需要对左手坐标系的Y轴做翻转并将原点定到rectNode中心，然后需要定位到摄像头节点cameraNode的原点中心\n                // let bottom = (-(item.rect.bottom-this.video.height)-this.video.height/2)*this._cameraScaleY \n                // let top = (-(item.rect.top-this.video.height)-this.video.height/2)*this._cameraScaleY\n                let bottom = (this.video.height / 2 - item.rect.bottom) * this._cameraScaleY // 简化的式子\n                let top = (this.video.height / 2 - item.rect.top) * this._cameraScaleY\n                let width = right - left;\n                let height = bottom - top;\n                // 绘制人脸矩形、关键点、信息数据、以及歪头角度示例\n                let rectOldNode = this.node['_children'][index+1]\n                let hatOldNode = rectOldNode && rectOldNode['_children'][0]\n                let faceBoxOldNode = rectOldNode && rectOldNode['_children'][1]\n                let rectNode\n                let hatNode\n                let faceBox\n                // 没有初始人脸相关节点时才创建\n                if(!rectOldNode || rectOldNode['index'] != index){\n                  rectNode = new cc.Node();\n                  rectNode.name = 'rectNode'\n                  rectNode.index = index\n                  rectNode.addComponent(cc.Graphics)\n                  rectNode.convertToWorldSpace(cc.v2(0, 0))\n                  this.node.insertChild(rectNode, index+1);\n                  this.ctx = rectNode.getComponent(cc.Graphics)\n                  hatNode = new cc.Node()\n                  rectNode.insertChild(hatNode, 0);\n                  hatNode.name = 'hatNode'\n                  hatNode.index = index\n                  hatNode.addComponent(cc.Sprite)\n                  hatNode.convertToWorldSpace(cc.v2(0, 0))\n                  let hatNodeSp = hatNode.getComponent(cc.Sprite)\n                  hatNodeSp.spriteFrame = new cc.SpriteFrame(this.img)\n                  hatNode.setAnchorPoint(0.5, 0.5);\n\n                  faceBox = new cc.Node();\n                  faceBox.name = 'faceBox'\n                  faceBox.addComponent(cc.Label)\n                  faceBox.convertToWorldSpace(cc.v2(0, 0))\n                  rectNode.insertChild(faceBox, 1);\n            \n                } else {\n                  rectNode = rectOldNode\n                  this.ctx = rectNode.getComponent(cc.Graphics)\n                  this.ctx.clear()\n                  hatNode = hatOldNode\n                  faceBox = faceBoxOldNode\n                }\n                this.ctx.lineWidth = 2;\n                this.ctx.strokeColor = cc.Color.YELLOW;\n                this.ctx.rect(left, top, width, height);\n                this.ctx.stroke();\n\n                // hatNode.width = width/ hatNode.width\n                hatNode.y = top+150\n                hatNode.x = left+width/2\n                item.roll && hatNode.setRotation(item.roll);\n                // hatNodeSp.width = width\n                // hatNode.setScale(width / this.img.width)\n        \n                this.faceBoxLabel = faceBox.getComponent(cc.Label)\n                faceBox.x = left + width/2\n                faceBox.y = bottom - 100\n                this.faceBoxLabel.fontSize = 20\n                if(item.roll) {\n                  this.faceBoxLabel.string = 'score: ' + item.score+'\\n'\n                                            +'yaw: ' + item.yaw+'\\n'\n                                            +'pitch: ' + item.pitch+'\\n'\n                                            +'roll: ' + item.roll+'\\n'\n                } else {\n                  this.faceBoxLabel.string = 'score: ' + item.score\n                }\n              \n                // 下巴轮廓，[0, 32]\n                for (let i = 0; i <= 32; i++) {\n                  this.ctx.circle((item.point_x[i] - this.video.width / 2) * this._cameraScaleY, (this.video.height / 2 - item.point_y[i]) * this._cameraScaleY, 2);\n                  this.ctx.fillColor = cc.Color.YELLOW;\n                  this.ctx.fill();\n                }\n                // 眉毛，[33, 42]，[64, 71]\n                for (let i = 33; i <= 42; i++) {\n                  this.ctx.circle((item.point_x[i] - this.video.width / 2) * this._cameraScaleY, (this.video.height / 2 - item.point_y[i]) * this._cameraScaleY, 2);\n                  this.ctx.fillColor = cc.Color.BLUE;\n                  this.ctx.fill();\n                }\n                for (let i = 64; i <= 71; i++) {\n                  this.ctx.circle((item.point_x[i] - this.video.width / 2) * this._cameraScaleY, (this.video.height / 2 - item.point_y[i]) * this._cameraScaleY, 2);\n                  this.ctx.fillColor = cc.Color.BLUE;\n                  this.ctx.fill();\n                }\n                // 眼部，[52, 63]\n                for (let i = 52; i <= 63; i++) {\n                  this.ctx.circle((item.point_x[i] - this.video.width / 2) * this._cameraScaleY, (this.video.height / 2 - item.point_y[i]) * this._cameraScaleY, 2);\n                  this.ctx.fillColor = cc.Color.RED;\n                  this.ctx.fill();\n                }\n                // 瞳孔，[72, 77], [104, 105]\n                for (let i = 72; i <= 77; i++) {\n                  this.ctx.circle((item.point_x[i] - this.video.width / 2) * this._cameraScaleY, (this.video.height / 2 - item.point_y[i]) * this._cameraScaleY, 2);\n                  this.ctx.fillColor = cc.Color.GRAY;\n                  this.ctx.fill();\n                }\n                for (let i = 104; i <= 105; i++) {\n                  this.ctx.circle((item.point_x[i] - this.video.width / 2) * this._cameraScaleY, (this.video.height / 2 - item.point_y[i]) * this._cameraScaleY, 2);\n                  this.ctx.fillColor = cc.Color.GRAY;\n                  this.ctx.fill();\n                }\n                // 鼻子，[47, 51], [78, 83]\n                for (let i = 47; i <= 51; i++) {\n                  this.ctx.circle((item.point_x[i] - this.video.width / 2) * this._cameraScaleY, (this.video.height / 2 - item.point_y[i]) * this._cameraScaleY, 2);\n                  this.ctx.fillColor = cc.Color.GREEN;\n                  this.ctx.fill();\n                }\n                for (let i = 78; i <= 83; i++) {\n                  this.ctx.circle((item.point_x[i] - this.video.width / 2) * this._cameraScaleY, (this.video.height / 2 - item.point_y[i]) * this._cameraScaleY, 2);\n                  this.ctx.fillColor = cc.Color.GREEN;\n                  this.ctx.fill();\n                }\n                // 嘴巴，[84, 103]\n                for (let i = 84; i <= 103; i++) {\n                  this.ctx.circle((item.point_x[i] - this.video.width / 2) * this._cameraScaleY, (this.video.height / 2 - item.point_y[i]) * this._cameraScaleY, 2);\n                  this.ctx.fillColor = cc.Color.ORANGE;\n                  this.ctx.fill();\n                }\n                // 额头，[106, 136]\n                for (let i = 106; i <= 136; i++) {\n                  this.ctx.circle((item.point_x[i] - this.video.width / 2) * this._cameraScaleY, (this.video.height / 2 - item.point_y[i]) * this._cameraScaleY, 2);\n                  this.ctx.fillColor = cc.Color.ORANGE;\n                  this.ctx.fill();\n                }\n              \n              })\n                let rectNodeArr = []\n                let elements = this.node['_children'];\n                for(let f =0, len=elements.length;f<len; f++){\n                  if(elements[f]['name'] == 'rectNode') {\n                    rectNodeArr.push(elements[f])\n                  }\n                }\n                if(res.data.length < rectNodeArr.length) {\n                  rectNodeArr.forEach((item, index) => {\n                    if(!res.data[index]) {\n                      this.node.removeChild(item)\n                    }\n                  })\n                }\n           \n            }\n          } else {\n            // 无人脸时清除节点\n            let elements = this.node['_children'];\n            for(let i = elements.length -1; i >= 0 ; i--){\n                if(elements[i]['name'] == 'rectNode'){\n                    elements.splice(i, 1);\n                }\n            }\n            // console.log('显示异常弹窗', JSON.stringify(res))\n          }\n          // console.log('人脸检测数据', res)\n        }).catch(err => {\n          console.log('人脸检测数据 err', err)\n        })\n    }\n  }\n  update(td) {\n    if (this.tex) {\n      //进行人脸检测\n      // 更新画面\n      this.tex.initWithData(this.video.data, cc.Texture2D.PixelFormat.RGBA8888, this.video.width, this.video.height)\n      // 摄像头画面适配铺满整屏\n      this.cameraNode.width = this._curWidth;\n      this.cameraNode.height = this._curHeight;\n\n      this.frame++;\n      if (this.isStartDetect) {\n        this.startDetector();   //每三帧进行一次人脸检测\n      }\n    }\n  }\n  \n  setBeautify() {\n    let smoothen = this.smoothenInput.string\n    let whiten = this.whitenInput.string\n    let filter = this.filterInput.string\n    // @ts-ignore\n    this.beautifyParam.smoothen = !!(+smoothen) || smoothen === '0' ? +smoothen : smoothen\n    // @ts-ignore\n    this.beautifyParam.whiten = !!(+whiten) || whiten === '0' ? +whiten : whiten\n    // @ts-ignore\n    this.beautifyParam.filter = !!(+filter) || filter === '0' ? +filter : filter\n    this.camera.setBeautifyParam(this.beautifyParam)\n    console.log('设置美颜', this.beautifyParam)\n  }\n\n  initCameraNode() {\n    console.log('camera.start ', this.video)\n    if (!this.cameraNode) {\n      // 设置摄像头画面节点\n      this.bg.active = false\n\n      this.cameraNode = new cc.Node();\n      this.cameraNode.addComponent(cc.Sprite)\n      this.node.insertChild(this.cameraNode, 0);\n      this.tex = new cc.Texture2D()\n      this.spriteFrame = new cc.SpriteFrame();\n      this.cameraNode.getComponent(cc.Sprite).spriteFrame = this.spriteFrame;\n      this.spriteFrame.setTexture(this.tex);\n\n      // this.faceBox.addComponent(cc.Graphics)\n\n      // 屏幕适配\n      this._cameraScaleY = this.node.height / this.video.height;\n      this._curWidth = this.video.width * this._cameraScaleY;\n      this._curHeight = this.node.height;\n\n      // 更新画面\n      this.tex.initWithData(this.video.data, cc.Texture2D.PixelFormat.RGBA8888, this.video.width, this.video.height)\n      // 摄像头画面适配铺满整屏\n      this.cameraNode.width = this._curWidth;\n      this.cameraNode.height = this._curHeight;\n    }\n  }\n  onStartCameraToggle(res) {\n    if (res.isChecked) {\n      this.camera = qg.createCamera()\n      // 实时接收摄像头数据\n      // this.camera.start().then(video => {\n        console.log('camera start', this.camera)\n      this.bg.active = false\n\n      this.camera.start({previewSize: this.previewSize}).then(video => {\n        console.log('start cb', video)\n        this.video = video;\n        this.initCameraNode()\n      }).catch(err => {\n        // 获取摄像头权限失败\n        this.onCameraErr(err)\n        console.log(err)\n      })\n    } else {\n      this.camera.destroy()\n      this.camera = null\n      this.bg.active = true\n    }\n  }\n  onDetectFacesToggle(res) {\n    let rectNode = this.node.getChildByName('rectNode')\n    let faceBox = this.node.getChildByName('faceBox')\n    console.log('rectnode', rectNode, faceBox)\n    console.log('res.isChecked', res.isChecked)\n    if (res.isChecked) {\n      !this.detector && (this.detector = qg.createFaceDetector());\n      rectNode && (rectNode.active = true)\n      this.isStartDetect = true\n    } else {\n      rectNode && (rectNode.active = false)\n      this.detector.offDetectFaces()\n      this.detector = null\n      this.isStartDetect = false\n    }\n  }\n  onAcitonsToggle(res) {\n    if (res.isChecked) {\n      this.detector.onActions(detectData => {\n        // console.log('onActions', detectData)\n      })\n      this.detector.onBlink(detectData => {\n        let n = this.blink.getComponent(cc.Label)\n        n.string = parseInt(n.string) + 1 + ''\n        console.log('onBlink', detectData)\n      })\n      // this.detector.onBlinkLeft(detectData => {\n      //   let n = this.leftBlink.getComponent(cc.Label)\n      //   n.string = parseInt(n.string) + 1 + ''\n      //   console.log('onBlinkLeft', detectData)\n      // })\n      // this.detector.onBlinkRight(detectData => {\n      //   let n = this.rightBlink.getComponent(cc.Label)\n      //   n.string = parseInt(n.string) + 1 + ''\n      //   console.log('onBlinkRight', detectData)\n      // })\n      this.detector.onMouthAh(detectData => {\n        let n = this.mouthAh.getComponent(cc.Label)\n        n.string = parseInt(n.string) + 1 + ''\n        console.log('onMouthAh', detectData)\n      })\n      this.detector.onMouthPout(detectData => {\n        let n = this.poutMouth.getComponent(cc.Label)\n        n.string = parseInt(n.string) + 1 + ''\n        console.log('onMouthPout', detectData)\n      })\n      this.detector.onHeadYaw(detectData => {\n        let n = this.headYaw.getComponent(cc.Label)\n        n.string = parseInt(n.string) + 1 + ''\n        console.log('onHeadYaw', detectData)\n      })\n      // this.detector.onHeadYawIndian(detectData => {\n      //   let n = this.IndianHeadYaw.getComponent(cc.Label)\n      //   n.string = parseInt(n.string) + 1 + ''\n      //   console.log('onHeadYawIndian', detectData)\n      // })\n      this.detector.onHeadPitch(detectData => {\n        let n = this.headPitch.getComponent(cc.Label)\n        n.string = parseInt(n.string) + 1 + ''\n        console.log('onHeadPitch', detectData)\n      })\n      this.detector.onBrowJump(detectData => {\n        let n = this.jumpEyeBrow.getComponent(cc.Label)\n        n.string = parseInt(n.string) + 1 + ''\n        console.log('onBrowJump', detectData)\n      })\n    } else {\n      this.detector && this.detector.offActions()\n    }\n  }\n  onPreviewToggle(res) {\n    console.log('onPreviewToggle', +res.node.name)\n    this.previewSize = +res.node.name\n    this.camera.resetSize(this.previewSize).then(res => {\n      if(res.code == 0) {\n        // 屏幕适\n        console.log('重新设置previewSize',this.previewSize,  this.video, this._cameraScaleY, this._curWidth, this._curHeight)\n        this._cameraScaleY = this.node.height / this.video.height;\n        this._curWidth = this.video.width * this._cameraScaleY;\n        this._curHeight = this.node.height;\n        setTimeout(() => {\n          console.log('重新设置previewSize last', this.previewSize,  this.video, this._cameraScaleY, this._curWidth, this._curHeight)\n        }, 1000)\n      }\n    }).catch(err => {\n      // 获取摄像头权限失败\n      console.log(err)\n    })\n  }\n}"]}