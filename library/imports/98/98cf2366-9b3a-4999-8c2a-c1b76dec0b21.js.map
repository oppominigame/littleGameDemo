{"version":3,"sources":["../../../../../assets/Script/ad/assets/Script/ad/NativeTemplateAd.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/ad","sourcesContent":["/**\n * @desc: 原生模版 广告\n * @Create Date: 2019-08-29 16:05:14\n * @Last Modified time: 2019-08-29 16:05:14\n */\n\nconst { ccclass, property } = cc._decorator\n\ninterface INativeTemplateAd {\n  show: Function\n  hide: Function\n  onLoad: Function\n  offLoad: Function\n  onError: Function\n  offError: Function\n  onHide: Function\n  offHide: Function\n  onShow: Function\n  offShow: Function\n  destroy: Function\n}\n\n@ccclass\nexport default class customAd extends cc.Component {\n  @property(cc.Button)\n  returnBtn: cc.Button = null\n\n  @property(cc.Node)\n  createBtn: cc.Node = null\n\n  @property(cc.Node)\n  showBtn: cc.Node = null\n\n  @property(cc.Node)\n  hideBtn: cc.Node = null\n\n  @property(cc.Node)\n  destroyBtn: cc.Node = null\n\n  @property(cc.Node)\n  onLoadBtn: cc.Node = null\n\n  @property(cc.Node)\n  offLoadBtn: cc.Node = null\n\n  @property(cc.Node)\n  onErrorBtn: cc.Node = null\n\n  @property(cc.Node)\n  offErrorBtn: cc.Node = null\n\n  @property(cc.Node)\n  onShowBtn: cc.Node = null\n\n  @property(cc.Node)\n  offShowBtn: cc.Node = null\n\n  @property(cc.Node)\n  onHideBtn: cc.Node = null\n\n  @property(cc.Node)\n  offHideBtn: cc.Node = null\n\n  @property(cc.Node)\n  logLabel: cc.Node = null\n\n  @property(cc.Object)\n  customAd: INativeTemplateAd = null\n\n  @property(cc.EditBox)\n  widthInput: cc.EditBox = null\n\n  @property(cc.EditBox)\n  topInput: cc.EditBox = null\n\n  @property(cc.EditBox)\n  leftInput: cc.EditBox = null\n\n  @property(cc.EditBox)\n  adUnitId: cc.EditBox = null\n\n  onTemplateToggle(res) {\n    // 切换原生模版广告的adUnitAd，上文下图：'399676'，左文右图：’400007‘，三图模版：‘400008’\n    this.adUnitId.string = res.node.name\n  }\n\n  start() {\n    this.adUnitId.string = '399676'\n    this.createBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.customAd = qg.createCustomAd({\n        // https://u.oppomobile.com/main/app.html 广告联盟网站中媒体管理 > 广告管理中广告名称下面的 id 即为 adUnitId\n        adUnitId: this.adUnitId.string + ''\n      })\n      this.log(`创建 原生模版 广告, adUnitId：${this.adUnitId.string}`)\n    })\n\n    this.showBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.log('展示广告')\n      // 调用 show 方法请求展示 原生模版广告，成功的时候回调 onShow，出错的时候回调 onError\n      this.customAd\n        .show()\n        .then(() => {\n          console.log('promise 回调：展示成功')\n        })\n        .catch(err => {\n          console.log(`promise 回调：展示失败 ${JSON.stringify(err)}`)\n        })\n    })\n    this.hideBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.log('隐藏广告')\n      // 隐藏 原生模版广告，成功回调 onHide, 出错的时候回调 onError\n      this.customAd.hide()\n    })\n    this.destroyBtn.on(cc.Node.EventType.TOUCH_START, () => {\n      this.log('销毁广告')\n      this.customAd.destroy()\n    })\n\n    let onLoadCallBack = () => {\n      this.log('加载广告成功回调')\n    }\n\n    this.onLoadBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('设置广告加载回调')\n      // 设置 原生模版广告 成功加载回调\n      this.customAd.onLoad(onLoadCallBack)\n    })\n\n    this.offLoadBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('移除广告加载回调')\n      // 设置 原生模版广告 成功加载回调\n      this.customAd.offLoad(onLoadCallBack)\n    })\n\n    let onErrorCallback = err => {\n      this.log(`广告失败回调： ${JSON.stringify(err)}`)\n    }\n\n    this.onErrorBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('设置广告失败回调')\n      // 设置 原生模版广告 成功加载回调\n      this.customAd.onError(onErrorCallback)\n    })\n\n    this.offErrorBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('移除广告失败回调')\n      // 设置 原生模版广告 成功加载回调\n      this.customAd.offError(onErrorCallback)\n    })\n\n    let onHideCallback = err => {\n      this.log(`广告失败回调： ${JSON.stringify(err)}`)\n    }\n\n    this.onHideBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('设置广告隐藏回调')\n      // 设置 原生模版广告 成功加载回调\n      this.customAd.onHide(onHideCallback)\n    })\n\n    this.offHideBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('移除广告隐藏回调')\n      // 设置 原生模版广告 成功加载回调\n      this.customAd.offHide(onHideCallback)\n    })\n\n    let onShowCallback = obj => {\n      this.log('设置广告展示回调：' + '原生模版广告 宽度：' + obj.width + ', 原生模版广告 高度：' + obj.height)\n    }\n\n    this.onShowBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('设置广告宽高变化回调')\n\n      this.customAd.onShow(onShowCallback)\n    })\n\n    this.offShowBtn.on(cc.Node.EventType.TOUCH_END, () => {\n      this.log('移除广告宽高变化回调')\n\n      this.customAd.offShow(onShowCallback)\n    })\n\n    // this.changeStyleBtn.on(cc.Node.EventType.TOUCH_START, () => {\n    //   let width = parseInt(this.widthInput.string.replace(/[^0-9]/gi, ''))\n    //   let height = parseInt(this.heightInput.string.replace(/[^0-9]/gi, ''))\n    //   let top = parseInt(this.topInput.string.replace(/[^0-9]/gi, ''))\n    //   let left = parseInt(this.leftInput.string.replace(/[^0-9]/gi, ''))\n    //   this.addStyle('width', width)\n    //   this.addStyle('height', height)\n    //   this.addStyle('top', top)\n    //   this.addStyle('left', left)\n    //   this.log(`广告样式：${JSON.stringify(this.customAd.style)}`)\n    // })\n  }\n\n  // 回调信息展示\n  log(msg) {\n    console.log(msg)\n    this.logLabel.getComponent(cc.Label).string = msg\n  }\n\n  // 返回\n  onClickReturnBtn() {\n    cc.director.loadScene('ad')\n  }\n\n  // addStyle(key, value) {\n  //   if ((value !== 0 && !value) || value === '') return this.customAd.style\n  //   // 参数必须保证广告能够在屏幕完全展示，否则设置不生效\n  //   this.customAd.style[key] = value\n  //   return this.customAd.style\n  // }\n\n  onDestroy() {\n    if (!this.customAd) return\n    this.customAd.destroy() // 销毁组件，释放资源\n  }\n}\n"]}